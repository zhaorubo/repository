<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            // 概念题  25分
            // 1.什么是作用域?有多少种作用域?怎么区分？什么是作用域链?
            // 作用域就是变量的一个有效区域。作用域有三种，1. 全局作用域 2. 局部作用域 3. 块级作用域  。
            // 作用域链就是变量在作用域查找的过程
            // 2.什么是闭包？使用场景有哪些？优缺点又是什么？
            // 3.JavaScript 的数据类型有哪些？并如何进行数据类型的判断？
            // javascript 的数据类型
            // 简单数据类型有：字符类型，数字类型，布尔值类型，undefined和null。
            // 复杂数据类型有：对象和数组
            // 可以使用typeof进行判断
            // 4.null 和 undefined 的区别 和 == 和 === 的区别 ？
            // null和undefined都是一个空值，它们的区别就是一个是人为定义的，另一个不是认为定义的
            // == 和 === 都是比较两个数据是否相等，=== 比 == 要多判断一个数据类型
            // 5.使用 continue 或 break 终止循环时，两种方式的区别是？
            // continue是退出本次循环
            // break是退出整个循环

            // 输出类型题  25分
            // 1.请写出下列输出结果，并说明原因。
            var a = 9
            function fn() {
                a = 0
                return function (b) {
                    return b + a++
                }
            }
            var f = fn() // 调用fn函数，fn函数的返回值是一个函数，此时f变量里面存了一个函数
            console.log(f(5)) // 6 //调用f变量的函数，传了一个参数5进去，此时的函数返回的则是 5 + 1 则为6
            console.log(fn()(5)) //返回两次 return function (b){return b + a++} 。因为此时是调用了两次fn函数，因为没有形参第二次的实参无效。都返回return出来的函数
            console.log(f(5)) // 7 上一次调用已经是形成闭包则为7
            console.log(a) // 2

            // 2.请写出下列输出结果，并说明原因。
            console.log(a) // undefined 因变量提升，此时的a只声明未赋值，则为undefined
            var a = 12
            function fn() {
                console.log(a) // 12 // 调用函数之前已经给a变量赋值为12，局部作用域里面没有，则按照作用域链的方式往外找，则为12
                a = 13
            }
            fn()
            console.log(a) // 13 // 函数调用完，最后赋值 a = 13 ，函数内未声明，此时修改的则是全局变量，最后输出全局的变量a则为13

            // 3.请写出下列输出结果，并说明原因。
            var a = 1
            var obj = {
                name: 'tom'
            }
            function fn() {
                var a2 = a
                obj2 = obj
                a2 = a
                obj2.name = 'jack'
            }
            fn()
            console.log(a) // 1 从未给a变量赋值 则为 1
            console.log(obj) //  {name: 'jack'} // 修改了obj2 不过引用数据类型修改的是堆数据，则为{name: 'jack'}

            // 4.请写出下列输出结果，并说明原因。
            var a = 1
            function fn(a) {
                console.log(a) // a() 函数体 // function a() 覆盖 var a
                var a = 2
                function a() {}
            }
            fn(a)

            // 5.请写出下列输出结果，并说明原因。
            let length = 4
            let numbers = []
            for (var i = 0; i < length; i++);
            {
                numbers.push(i + 1)
            }
            // push 是在数组最后添加一个元素，循环4次，i+1则 0+1 1+1 1+2 1+3  最后输出就是[1,2,3,4]
            console.log(numbers) // [1，2，3，4]

            // 编程题  50分
            // 1.判断一个字符串中出现次数最多的字符，统计这个次数
            let str = 'abcccccdeedssse'
            let obj2 = {}
            for (let i = 0; i < str.length; i++) {
                if (obj2[str[i]]) {
                    obj2[str[i]]++
                } else {
                    obj2[str[i]] = 1
                }
            }
            let max = 0
            let maxStr = ''
            for (const key in obj2) {
                if (obj2[key] > max) {
                    max = obj2[key]
                    maxStr = key
                }
            }
            console.log(obj2)
            console.log(max)
            console.log(maxStr)

            // 2.数组去重？（2种方法以上）
            let arr = [1, 2, 3, 1, 1, 1, 1, 2, 3]
            // 方法1
            let newArr = []
            arr.forEach((ele, index) => {
                if (arr.indexOf(ele) == index) {
                    newArr.push(ele)
                } else {
                    newArr.slice(index, 1)
                }
            })
            console.log(newArr)

            // 方法2
            let newArr2 = arr.filter((ele, index) => {
                return arr.indexOf(ele) == index
            })
            console.log(newArr2)
            // 3.请你从小到大数组排序.（2种方法以上）
            let arr1 = [1, 2, 8, 7, 4, 10, 3, 13, 5]
            arr1.sort(function (a, b) {
                return a - b
            })
            console.log(arr1)
            // 4.找出数组中年龄小于18岁的女生的信息重新组成新的数组,并且将她们count变为现有的平方（10）
            let arr2 = [
                { name: '111', sex: 'boy', age: 18, count: 20 },
                { name: '222', sex: 'girl', age: 17, count: 30 },
                { name: '333', sex: 'boy', age: 16, count: 40 },
                { name: '444', sex: 'girl', age: 15, count: 50 },
                { name: '555', sex: 'boy', age: 20, count: 60 },
                { name: '666', sex: 'girl', age: 13, count: 70 },
                { name: '777', sex: 'boy', age: 14, count: 80 }
            ]

            let newArr3 = []
            arr2.forEach(function (ele, index) {
                if (arr2[index].age < 18) {
                    arr2[index].count *= 2
                    newArr3.push(arr2[index])
                }
            })
            console.log(newArr3)
            // 5.深浅拷贝的原理是什么？请你写出具体的解决代码。
            // 浅拷贝的是第一层的所有数据进行赋值操作
            // 深拷贝的原理是循环拿到每一层最简单的数据类型进行赋值操作
            // 浅拷贝
            let obj = { a: 1, b: 2, c: { d: 1, e: 2 } }
            let newobj = {}
            for (let key in obj) {
                let item = obj[key]
                newobj[key] = item
            }
            console.log(newobj)

            // 深拷贝
            let obj3 = {
                a: 1,
                b: '2',
                e: 3,
                c: { d: '1', e: 2 },
                d: [1, 2, 3]
            }
            let newobj2 = {}
            function CloneTwo(oldObj, newObj) {
                for (let key in oldObj) {
                    let item = oldObj[key]
                    if (item instanceof Array) {
                        console.log('sz')
                        newObj[key] = []
                        CloneTwo(item, newObj[key])
                    } else if (item instanceof Object) {
                        console.log('dx')
                        newObj[key] = {}
                        CloneTwo(item, newObj[key])
                    } else {
                        newObj[key] = item
                    }
                }
            }
            CloneTwo(obj3, newobj2)
            newobj2.c.d = 'haha'
            console.log(obj3)
            console.log(newobj2)
            // 提高加分：
            // 问题1：a是什么的时候，可以满足下列条件，输出1
            // var a = ?
            //  if (a == 1 && a == 2 && a == 3) {
            //    console.log(1);
            //  }
            // 问题2:编写⼀个函数，输⼊n为偶数时，调⽤函数求1/2+1/4+…+1/n,
            // 当输⼊n为奇数时，调⽤函数求1/1+1/3+…+1/n
        </script>
    </body>
</html>
