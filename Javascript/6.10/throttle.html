<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>节流函数</title>
    </head>
    <body>
        <style>
            body {
                height: 3000px;
            }
        </style>
        <!-- 
          什么是节流
          前端中，高频的触发事件，是一个非常耗费性能的事情，
          我们不允许，用节流函数去降低事件触发的频率

          我们去设置一个时间，当时间足够长后，才去触发对应的时间处理
          作用：降低事件的触发频率 滑动10m 触发100次 => 滑动10m 触发10次
         -->
        <script>
            function handle() {
                // 滑动后触发的事件处理函数
                console.log('滚起来了')
            }

            function throttle(handle, wait = 800) {
                let previous = 0 //记录时间
                return function proxy(e) {
                    let that = this
                    let now = +new Date()
                    // 时间差足够长的时候，才触发对应的事件处理函数
                    if (now - previous > wait) {
                        // 触发事件函数
                        handle.call(that, e)
                        previous = now
                    }
                }
            }
            window.addEventListener('scroll', throttle(handle))
        </script>
    </body>
</html>
