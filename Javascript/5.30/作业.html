<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>作业</title>
    </head>
    <body>
      <button class="add">添加一条新的访客信息</button>
        <button class="del">删除选中</button>
        <button class="sort">从小到大</button>
        <table border="1" cellspacing="0" cellpadding="10">
            <tr>
                <th>姓名</th>
                <th>年龄</th>
                <th>操作</th>
                <th>选择</th>
            </tr>

            <script>
              var info = [
                { name: '胡杭', age: 16 },
                { name: '胜明', age: 22 },
                { name: '军毅', age: 21 },
                { name: '晓华', age: 13 },
                { name: '盛聪', age: 23 },
                { name: '侦剑', age: 32 },
                { name: '红翔', age: 25 },
                { name: '超维', age: 18 },
                { name: '士琪', age: 42 },
                { name: '艳华', age: 20 }
            ]
            let addBtn = document.querySelector('.add')
            let tbody = document.querySelector('tbody')
            let del = document.querySelector('.del')
            let sort = document.querySelector('.sort')
            let count = 0
            addBtn.addEventListener('click',() => {
              count++
             let tr = document.createElement('tr')
             for (let key in info[count-1]) {
               let td = document.createElement('td')
               td.setAttribute('class','td_class')
               td.innerHTML = info[count-1][key]
               tr.appendChild(td)
             }
             let td_button = document.createElement('td')
             td_button.innerHTML = '<button class="btn">删除</button>'
             tr.appendChild(td_button)
             let td_input = document.createElement('td')
             td_input.innerHTML = '<input type="checkbox" class="checkbox" />'
             tr.appendChild(td_input)
             tbody.appendChild(tr)


             let btn = document.querySelectorAll('.btn')
             btn.forEach((ele) => {
               ele.addEventListener('click',function( ) {
                ele.parentElement.parentElement.remove()
               })
             })
             if(count == info.length) {
               count = 0
             }
            })

            
            del.addEventListener('click',function() {
              let checkBoxs = document.querySelectorAll('.checkbox')
              checkBoxs.forEach(function(ele,index) {
                console.log(ele.checked);
                if(ele.checked) {
                  // 已被选中
                  ele.parentElement.parentElement.remove()
                }
              })
            })
              sort.addEventListener('click', () => {
                let tr = document.querySelectorAll('tr:not(:first-child)')
                let tr_arr = Array.from(tr)
              tr_arr.sort(function(a,b) {
               return a.firstElementChild.nextElementSibling.innerText - b.firstElementChild.nextElementSibling.innerText
              })

              tr_arr.forEach(function(ele) {
                // appendChild()  
                // ele如果是原本就有的结构是 不会重新插入到最后
                // 会覆盖
                tbody.appendChild(ele)
              })
              })
            </script>
    </body>
</html>
