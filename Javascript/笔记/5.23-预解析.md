# 预解析

## 概念

### 解析代码（预解析、预编译）

> 将关键字 var function 的内容提前到 script 标签的最上方。这样提升的过程我们称之为**代码预解析**机制

### 执行代码

## 学会如何去解析（了解 js 的解析机制）

### var 提升机制

1. 全局的 var 提升

```
console.log(a) // undefined
var a = 1


```

2. 局部 var 中 如果变量没有关键字 var，那么将会变成全局的变量(显式提升)

```
var a
function fn() {
    // 如果函数内部没有用var去声明一个变量
    // 该变量会被系统做一个提升的操作
    // 在代码执行前，先在script标签开始的时候，自动在全局补充var a;
    a = 1
    console.log(a)
}
fn()


function fn() {
  // var x = 1,y = 1
      var x = y = 1
      console.log(x, y) // 1 1
  }
fn()
console.log(y)
```

3. 局部 var 中，如果变量有 var，那么将会提升到函数顶部，依旧是局部变量（显式提升）

```
function fn() {
  // var b;
  console.log(b)
  var b = 2;
  console.log(b)
}
fn()
```

4. 隐式提升

```
var x = y = 1;  =>  var x = 1; y = 1
```

### function 变量提升

1. 不同名：提升即可
2. 不同名：遵循就近原则

```
function a() {
    console.log('x')
}

function a() {
    console.log('xx')
}

a()
```

3. var 和 function 都是同名的情况下,var 和函数都会提升，通过赋值覆盖了 m 函数，所以报错

```
//var 和函数都会提升，通过赋值覆盖了 m 函数，所以报错
// 解析
var m
function m() {
    console.log(22)
}
m = 1
m()



// 原代码
function m() {
    console.log(22)
}
var m = 1
m()
```
