# fetch

## fetch 是什么

-   是 XHR 升级版，基于 Promise 的请求。

## fetch 的作用

-   用来请求后台数据的

## fetch 的优缺点

-   优点：
    -   比 XHR 原生的 ajax 更加简洁
-   缺点：

    -   兼容性极差 IE 完全不兼容 caniuse(看兼容性的一个网站)

    **如果不考虑兼容性，直接使用 fetch**

## fetch 的使用

### GET 请求处理

```
fetch(getURL)
      .then(
          function (res) {
              // 成功请求触发的函数
              console.log('请求成功')
              console.log(res)
              return res.json()
          },
          function (err) {
              // 请求失败触发的函数
              // 通常请求就是提示用户失败操作
              // 比如 用户的登录 注册
              // console.log(err)
              console.log('请求失败')
          }
      )
      .then(function (res) {
          console.log(res) // 这里获取数据
      })
```

### POST 请求处理

```
// post请求处理
// 1. post的参数请求体
// 2. 设置格式
fetch(postURL, {
    // 设置请求方式
    method: 'POST',
    // 设置参数
    body: 'phone=18520234935&password=123456',
    // 设置格式
    headers: {
        'Content-type': 'application/x-www-form-urlencoded'
    }
})
    .then(
        function (res) {
            console.log('成功')
            return res.json()
        },
        function (err) {
            console.log('请求失败')
        }
    )
    .then(function (res) {
        console.log(res)
    })
```
