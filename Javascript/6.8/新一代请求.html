<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <!-- 新一代请求方式
              1. fetch 是什么
              是XHR升级版，基于Promise的请求。
              2. 作用
              用来请求后台数据的
              3. 优缺点
              优点：比XHR原生的ajax更加简洁
              缺点：兼容性极差 IE 完全不兼容 caniuse(看兼容性的一个网站)
              如果不考虑兼容性，直接使用fetch
              4. 使用
              fetch(地址，配置) 即可发起请求
              配置：参数 格式

              get请求的处理 参数放在url上 （xhr一样）
              如何获取返回内容？
              1. 第一个then(成功函数,失败函数)，用来判断你的请求是否成功
              2. 第二个then(获取数据)
        -->
        <script>
            let postURL = 'http://eggblog.0melon0.cn/api/user/login'
            let getURL = 'http://jsonplaceholder.typicode.com/posts?_limit=5&_page=2'

            // // get请求处理
            // fetch(getURL)
            //     .then(
            //         function (res) {
            //             // 成功请求触发的函数
            //             console.log('请求成功')
            //             console.log(res)
            //             return res.json()
            //         },
            //         function (err) {
            //             // 请求失败触发的函数
            //             // 通常请求就是提示用户失败操作
            //             // 比如 用户的登录 注册
            //             // console.log(err)
            //             console.log('请求失败')
            //         }
            //     )
            //     .then(function (res) {
            //         console.log(res) // 这里获取数据
            //     })

            // post请求处理
            // 1. post的参数请求体
            // 2. 设置格式
            fetch(postURL, {
                // 设置请求方式
                method: 'POST',
                // 设置参数
                body: 'phone=18520234935&password=123456',
                // 设置格式
                headers: {
                    'Content-type': 'application/x-www-form-urlencoded'
                }
            })
                .then(
                    function (res) {
                        console.log('成功')
                        return res.json()
                    },
                    function (err) {
                        console.log('请求失败')
                    }
                )
                .then(function (res) {
                    console.log(res)
                })
        </script>
    </body>
</html>
